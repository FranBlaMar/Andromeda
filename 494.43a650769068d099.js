"use strict";(self.webpackChunkProyectoAstronomia=self.webpackChunkProyectoAstronomia||[]).push([[494],{494:(X,b,c)=>{c.r(b),c.d(b,{ForoModule:()=>z});var f=c(9808),u=c(5358),s=c(2382),t=c(1223),C=c(520),Z=c(9019),v=c(6404);let _=(()=>{class e{constructor(o,r){this.http=o,this.servicioUsuario=r,this.URLBase=Z.N.URLBase,this.headers=(new C.WM).set("Authorization",`Bearer ${localStorage.getItem("jwt")}`||"")}getPosts(){return this.http.get(`${this.URLBase}/post`,{headers:this.headers})}getPostPorId(o){return this.http.get(`${this.URLBase}/post/${o}`,{headers:this.headers})}obtenerUsuario(){return this.servicioUsuario.obtenerUsuario().subscribe(o=>this.user=o),this.user}crearPost(o){const r=`${this.URLBase}/post`;return o.author=this.user,this.http.post(r,o,{headers:this.headers})}obtenerComentarios(o){return this.http.get(`${this.URLBase}/post/${o.id}/comentario`,{headers:this.headers})}crearComentarios(o,r){const i=`${this.URLBase}/post/${o.id}/comentario`;return r.author=this.obtenerUsuario(),this.http.post(i,r,{headers:this.headers})}borrarComentarios(o,r){const i=`${this.URLBase}/post/${o.id}/comentario/${r.idComment}`;return r.author=this.obtenerUsuario(),this.http.delete(i,{headers:this.headers})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(C.eN),t.LFG(v.Z))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function T(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",3),t.TgZ(2,"h2",4),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t._UZ(6,"hr"),t.TgZ(7,"p"),t._uU(8),t.qZA(),t._UZ(9,"hr"),t.TgZ(10,"p",5),t._uU(11),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(3),t.hij(" ",o.post.title," "),t.xp6(2),t.hij("Post escrito por: ",o.post.author.userName,""),t.xp6(3),t.hij(" ",o.post.body,""),t.xp6(3),t.hij("Fecha de creaci\xf3n: ",o.post.date,"")}}let x=(()=>{class e{constructor(o,r,i){this.servicio=o,this.routeSnap=r,this.route=i,this.carga=!1,this.mostrarComentarios=new t.vpe,this.comentarios=[]}ngOnInit(){this.getPost()}getPost(){this.servicio.getPostPorId(this.routeSnap.snapshot.params.idPost).subscribe(r=>{this.post=r,this.comentarios=r.comments,this.mostrarComentarios.emit(this.comentarios),this.carga=!0})}volverAForo(){this.route.navigateByUrl("/foro")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_),t.Y36(u.gz),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-detalles-post"]],outputs:{mostrarComentarios:"mostrarComentarios"},decls:5,vars:1,consts:[[1,"volver"],[1,"icono","bi","bi-arrow-90deg-left",3,"click"],[4,"ngIf"],[1,"card-body","p-5"],[1,"text-center","titulo"],[1,"small"]],template:function(o,r){1&o&&(t._UZ(0,"br"),t._UZ(1,"br"),t.TgZ(2,"a",0),t.TgZ(3,"i",1),t.NdJ("click",function(){return r.volverAForo()}),t.qZA(),t.qZA(),t.YNc(4,T,12,4,"div",2)),2&o&&(t.xp6(4),t.Q6J("ngIf",r.carga))},styles:[".card-body[_ngcontent-%COMP%]{background-color:#ffffffe6;margin:auto;max-width:80vw;border-radius:20px}.titulo[_ngcontent-%COMP%]{text-transform:uppercase;-webkit-text-decoration:underline 3px;text-decoration:underline 3px;font-style:normal}.icono[_ngcontent-%COMP%]{font-size:16px;text-transform:uppercase;font-weight:700;color:#000;letter-spacing:2px;background-color:#fff;padding:18px 30px;border-radius:20px;position:fixed;bottom:40px;right:40px;transition:all .3s ease 0ms;box-shadow:0 8px 15px #00000080;z-index:99;cursor:pointer}.volver[_ngcontent-%COMP%]{margin-left:3rem;min-height:100px}.icono[_ngcontent-%COMP%]{font-size:2rem}"]}),e})();function P(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"i",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().mostrarForm()}),t._uU(1,"Mostrar "),t.qZA()}}function y(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"i",8),t.NdJ("click",function(){return t.CHM(o),t.oxw().ocultarForm()}),t.TgZ(1,"p",9),t._uU(2,"Ocultar"),t.qZA(),t.qZA()}}function A(e,n){1&e&&(t.TgZ(0,"p",13),t._uU(1,"Campo obligatorio "),t.qZA())}function U(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"textarea",10),t._uU(2," "),t.qZA(),t.YNc(3,A,2,0,"p",11),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"button",12),t._uU(7," Crear Comentario "),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(3),t.Q6J("ngIf",o.formularioComentario.controls.comment.errors&&o.formularioComentario.controls.comment.touched),t.xp6(3),t.Q6J("disabled",o.formularioComentario.invalid)}}function q(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit;return t.oxw(2).borrarComentario(i)}),t.qZA()}}function F(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",2),t.TgZ(2,"p",15),t._uU(3),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"p",16),t._uU(6),t.qZA(),t.YNc(7,q,1,0,"i",17),t._UZ(8,"br"),t.qZA(),t.qZA()),2&e){const o=n.$implicit;t.xp6(3),t.hij("Comentario de: ",o.author.userName,""),t.xp6(3),t.hij(" ",o.comment,""),t.xp6(1),t.Q6J("ngIf",o.esAutor)}}function M(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,F,9,3,"div",14),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.comentarios)}}let O=(()=>{class e{constructor(o,r,i,a){this.servicio=o,this.route=r,this.builder=i,this.routeSnap=a,this.esAutor=!1,this.comentarios=[],this.mostrar=!1,this.carga=!1,this.formularioComentario=this.builder.group({comment:[,[s.kI.required]]})}ngOnInit(){this.user=this.servicio.obtenerUsuario(),this.getPost()}getPost(){this.servicio.getPostPorId(this.routeSnap.snapshot.params.idPost).subscribe(r=>{this.post=r})}getComentarios(o){let r=localStorage.getItem("userName");this.comentarios=o;for(let i of this.comentarios)i.author.userName==r&&(i.esAutor=!0);this.carga=!0}borrarComentario(o){this.servicio.borrarComentarios(this.post,o).subscribe(r=>{this.route.navigateByUrl("foro")})}crearComentario(){let o=this.post,r=this.formularioComentario.value;r.author=this.user,this.servicio.crearComentarios(o,r).subscribe(i=>this.route.navigateByUrl("foro"))}mostrarForm(){this.mostrar=!0}ocultarForm(){this.mostrar=!1}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_),t.Y36(u.F0),t.Y36(s.qu),t.Y36(u.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-comentarios"]],decls:11,vars:5,consts:[[1,"container"],[3,"mostrarComentarios"],[1,"card-body","p-3"],["id","formularioComentario",3,"formGroup","submit"],["class","bi bi-eye",3,"click",4,"ngIf"],["class","bi bi-eye-slash",3,"click",4,"ngIf"],[4,"ngIf"],[1,"bi","bi-eye",3,"click"],[1,"bi","bi-eye-slash",3,"click"],[1,"textoIcono"],["rows","5","form","formularioComentario","formControlName","comment","placeholder","Introduzca aqu\xed su comentario",1,"col-8"],["class","form-text text-danger",4,"ngIf"],[1,"btn","btn-dark","btn-lg","btn-block",3,"disabled"],[1,"form-text","text-danger"],[4,"ngFor","ngForOf"],[1,"small"],[1,"p-3"],["class","bi bi-trash",3,"click",4,"ngIf"],[1,"bi","bi-trash",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"app-detalles-post",1),t.NdJ("mostrarComentarios",function(a){return r.getComentarios(a)}),t.qZA(),t.TgZ(2,"div",2),t.TgZ(3,"form",3),t.NdJ("submit",function(){return r.crearComentario()}),t.TgZ(4,"h5"),t._uU(5,"Escriba aqu\xed su comentario: "),t.YNc(6,P,2,0,"i",4),t.TgZ(7,"span"),t.YNc(8,y,3,0,"i",5),t.qZA(),t.qZA(),t.YNc(9,U,8,2,"span",6),t.qZA(),t.qZA(),t.YNc(10,M,2,1,"div",6),t.qZA()),2&o&&(t.xp6(3),t.Q6J("formGroup",r.formularioComentario),t.xp6(3),t.Q6J("ngIf",!r.mostrar),t.xp6(2),t.Q6J("ngIf",r.mostrar),t.xp6(1),t.Q6J("ngIf",r.mostrar),t.xp6(1),t.Q6J("ngIf",r.carga))},directives:[x,s._Y,s.JL,s.sg,f.O5,s.Fj,s.JJ,s.u,f.sg],styles:[".card-body[_ngcontent-%COMP%]{background-color:#ffffffe6;margin:auto;max-width:80vw;border-radius:20px;margin-top:2rem}i[_ngcontent-%COMP%]{float:right;cursor:pointer;font-size:18px}.pagina[_ngcontent-%COMP%]{min-height:80vh}.gifCarga[_ngcontent-%COMP%]{margin-top:15rem}.container[_ngcontent-%COMP%]{min-height:80vh}.textoIcono[_ngcontent-%COMP%]{float:right}.bi-trash[_ngcontent-%COMP%]{font-size:23px}.bi-trash[_ngcontent-%COMP%]:hover{color:red}"]}),e})();function I(e,n){1&e&&(t.TgZ(0,"p",10),t._uU(1,"El t\xedtulo es obligatorio "),t.qZA())}function J(e,n){1&e&&(t.TgZ(0,"p",10),t._uU(1,"El cuerpo es obligatorio "),t.qZA())}let N=(()=>{class e{constructor(o,r,i){this.builder=o,this.servicio=r,this.route=i,this.formularioPost=this.builder.group({title:[,[s.kI.required]],body:[,[s.kI.required]]})}ngOnInit(){this.servicio.obtenerUsuario()}crearPost(){this.servicio.crearPost(this.formularioPost.value).subscribe(o=>{this.route.navigateByUrl("foro")})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(_),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-crear-post"]],decls:21,vars:4,consts:[[1,"container"],[1,"card-body","p-5"],[1,"col-md-8","col-sm-8"],["id","formEdit",3,"formGroup","submit"],[1,"card-title"],["type","text","formControlName","title","placeholder","Introduzca aqu\xed el t\xedtulo del post"],["class","form-text text-danger",4,"ngIf"],[1,"card-text"],["rows","5","form","formEdit","formControlName","body","placeholder","Introduzca aqu\xed el cuerpo del post",1,"col-12"],[1,"btn","btn-dark","btn-lg","btn-block",3,"disabled"],[1,"form-text","text-danger"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"form",3),t.NdJ("submit",function(){return r.crearPost()}),t.TgZ(4,"h2",4),t._uU(5,"T\xedtulo: "),t._UZ(6,"input",5),t._UZ(7,"br"),t.YNc(8,I,2,0,"p",6),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"p",7),t.TgZ(11,"strong"),t._uU(12,"Cuerpo: "),t.qZA(),t.qZA(),t.TgZ(13,"textarea",8),t._uU(14," "),t.qZA(),t.YNc(15,J,2,0,"p",6),t._UZ(16,"br"),t._UZ(17,"br"),t._UZ(18,"br"),t.TgZ(19,"button",9),t._uU(20," Crear Post "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(3),t.Q6J("formGroup",r.formularioPost),t.xp6(5),t.Q6J("ngIf",r.formularioPost.controls.title.errors&&r.formularioPost.controls.title.touched),t.xp6(7),t.Q6J("ngIf",r.formularioPost.controls.body.errors&&r.formularioPost.controls.body.touched),t.xp6(4),t.Q6J("disabled",r.formularioPost.invalid))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,f.O5],styles:[".container[_ngcontent-%COMP%]{min-height:80vh}.card-body[_ngcontent-%COMP%]{background-color:#ffffffe6;margin:auto;max-width:80vw;border-radius:20px}"]}),e})();var k=c(7579),w=function(){function e(n,o,r){this.el=n,this.vcr=o,this.renderer=r,this.dtOptions={}}return e.prototype.ngOnInit=function(){var n=this;this.dtTrigger?this.dtTrigger.subscribe(function(o){n.displayTable(o)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(n){var o=this;n&&(this.dtOptions=n),this.dtInstance=new Promise(function(r,i){Promise.resolve(o.dtOptions).then(function(a){0===Object.keys(a).length&&0===$("tbody tr",o.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var p={rowCallback:function(d,m,g){if(a.columns){var h=a.columns;o.applyNgPipeTransform(d,h),o.applyNgRefTemplate(d,h,m)}a.rowCallback&&a.rowCallback(d,m,g)}};p=Object.assign({},a,p),o.dt=$(o.el.nativeElement).DataTable(p),r(o.dt)})})})},e.prototype.applyNgPipeTransform=function(n,o){o.filter(function(i){return i.ngPipeInstance&&!i.ngTemplateRef}).forEach(function(i){var a=i.ngPipeInstance,l=o.findIndex(function(g){return g.data===i.data}),p=n.childNodes.item(l),d=$(p).text(),m=a.transform(d);$(p).text(m)})},e.prototype.applyNgRefTemplate=function(n,o,r){var i=this;o.filter(function(l){return l.ngTemplateRef&&!l.ngPipeInstance}).forEach(function(l){var p=l.ngTemplateRef,d=p.ref,m=p.context,g=o.findIndex(function(G){return G.data===l.data}),h=n.childNodes.item(g);$(h).html("");var L=Object.assign({},m,null==m?void 0:m.userData,{adtData:r}),S=i.vcr.createEmbeddedView(d,L);i.renderer.appendChild(h,S.rootNodes[0])})},e.\u0275fac=function(o){return new(o||e)(t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(t.Qsj))},e.\u0275dir=t.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),D=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.ez]]}),e}();const E=function(e){return[e]};function Y(e,n){if(1&e&&(t.TgZ(0,"tr",5),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA()),2&e){const o=n.$implicit;t.Q6J("routerLink",t.VKq(4,E,o.id)),t.xp6(2),t.Oqu(o.author.userName),t.xp6(2),t.Oqu(o.title),t.xp6(2),t.Oqu(o.date)}}const B=function(){return["crearPost"]},Q=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main"]],decls:1,vars:0,template:function(o,r){1&o&&t._UZ(0,"router-outlet")},directives:[u.lC],styles:[""]}),e})(),children:[{path:"",component:(()=>{class e{constructor(o){this.servicio=o,this.listaPosts=[],this.dtOptions={},this.dtTrigger=new k.x}ngOnInit(){this.dtOptions={responsive:!0,processing:!0,language:{url:"https://cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"}},this.obtenerPosts()}obtenerPosts(){this.servicio.getPosts().subscribe(o=>{this.listaPosts=o,this.dtTrigger.next(null)})}ngOnDestroy(){this.dtTrigger.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-entradas"]],decls:16,vars:5,consts:[[1,"container"],[1,"card","m-5","p-3"],[1,"card-body"],["datatable","",1,"table","table-bordered","table-striped","table-hover",3,"dtOptions","dtTrigger"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"table",3),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7,"Autor"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Titulo"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Fecha"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"tbody"),t.YNc(13,Y,7,6,"tr",4),t.qZA(),t.qZA(),t.TgZ(14,"a",5),t._uU(15," Crear un post"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(3),t.Q6J("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),t.xp6(10),t.Q6J("ngForOf",r.listaPosts),t.xp6(1),t.Q6J("routerLink",t.DdM(4,B)))},directives:[w,f.sg,u.rH,u.yS],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:#f1d67b4d}.container[_ngcontent-%COMP%]{min-height:80vh}"]}),e})()},{path:"crearPost",component:N},{path:":idPost",component:O},{path:"**",redirectTo:"post"}]}];let j=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Q)]]}),e})();var R=c(4466);let z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.ez,j,D,u.Bz,R.m,s.UX]]}),e})()}}]);